{"ast":null,"code":"import { createRouter, createWebHistory } from \"vue-router\";\nimport LoginView from \"@/views/LoginView.vue\";\nimport RegisterView from \"@/views/RegisterView.vue\";\nimport PublicHome from \"@/views/PublicHome.vue\";\nimport CategoriaView from \"@/views/CategoriaView.vue\";\nimport PresentacionView from \"@/views/PresentacionView.vue\";\nimport ProductoView from \"@/views/ProductoView.vue\";\nconst routes = [{\n  path: \"/login\",\n  component: LoginView\n}, {\n  path: \"/register\",\n  component: RegisterView\n}, {\n  path: \"/categorias\",\n  component: CategoriaView\n}, {\n  path: \"/presentaciones\",\n  component: PresentacionView\n}, {\n  path: \"/productos\",\n  component: ProductoView\n}, {\n  path: \"/\",\n  redirect: \"/categorias\"\n}];\nconst router = createRouter({\n  history: createWebHistory(),\n  routes\n});\n\n// ðŸ‘‡ AquÃ­ va el beforeEach\nrouter.beforeEach((to, from, next) => {\n  const publicPaths = [\"/login\", \"/register\"];\n  const authRequired = !publicPaths.includes(to.path);\n  const token = sessionStorage.getItem(\"access_token\");\n  if (authRequired && !token) return next(\"/login\");\n  next();\n});\nexport default router;\nrouter.beforeEach((to, from, next) => {\n  const token = sessionStorage.getItem(\"access_token\");\n  const isPublic = !!(to.meta && to.meta.public);\n  const free = [\"/login\", \"/register\"];\n  if (isPublic || free.includes(to.path)) return next();\n  if (!token) return next(\"/login\");\n  next();\n});","map":{"version":3,"names":["createRouter","createWebHistory","LoginView","RegisterView","PublicHome","CategoriaView","PresentacionView","ProductoView","routes","path","component","redirect","router","history","beforeEach","to","from","next","publicPaths","authRequired","includes","token","sessionStorage","getItem","isPublic","meta","public","free"],"sources":["C:/Users/pedvi/Documents/catalogo-web/frontend/src/router.js"],"sourcesContent":["import { createRouter, createWebHistory } from \"vue-router\";\nimport LoginView from \"@/views/LoginView.vue\";\nimport RegisterView from \"@/views/RegisterView.vue\";\nimport PublicHome from \"@/views/PublicHome.vue\";\nimport CategoriaView from \"@/views/CategoriaView.vue\";\nimport PresentacionView from \"@/views/PresentacionView.vue\";\nimport ProductoView from \"@/views/ProductoView.vue\";\n\nconst routes = [\n  { path: \"/login\", component: LoginView },\n  { path: \"/register\", component: RegisterView },\n  { path: \"/categorias\", component: CategoriaView },\n  { path: \"/presentaciones\", component: PresentacionView },\n  { path: \"/productos\", component: ProductoView },\n  { path: \"/\", redirect: \"/categorias\" },\n];\n\nconst router = createRouter({\n  history: createWebHistory(),\n  routes,\n});\n\n// ðŸ‘‡ AquÃ­ va el beforeEach\nrouter.beforeEach((to, from, next) => {\n  const publicPaths = [\"/login\", \"/register\"];\n  const authRequired = !publicPaths.includes(to.path);\n  const token = sessionStorage.getItem(\"access_token\");\n\n  if (authRequired && !token) return next(\"/login\");\n  next();\n});\n\nexport default router;\n\n\nrouter.beforeEach((to, from, next) => {\n  const token = sessionStorage.getItem(\"access_token\");\n  const isPublic = !!(to.meta && to.meta.public);\n  const free = [\"/login\", \"/register\"];\n  if (isPublic || free.includes(to.path)) return next();\n  if (!token) return next(\"/login\");\n  next();\n});\n"],"mappings":"AAAA,SAASA,YAAY,EAAEC,gBAAgB,QAAQ,YAAY;AAC3D,OAAOC,SAAS,MAAM,uBAAuB;AAC7C,OAAOC,YAAY,MAAM,0BAA0B;AACnD,OAAOC,UAAU,MAAM,wBAAwB;AAC/C,OAAOC,aAAa,MAAM,2BAA2B;AACrD,OAAOC,gBAAgB,MAAM,8BAA8B;AAC3D,OAAOC,YAAY,MAAM,0BAA0B;AAEnD,MAAMC,MAAM,GAAG,CACb;EAAEC,IAAI,EAAE,QAAQ;EAAEC,SAAS,EAAER;AAAU,CAAC,EACxC;EAAEO,IAAI,EAAE,WAAW;EAAEC,SAAS,EAAEP;AAAa,CAAC,EAC9C;EAAEM,IAAI,EAAE,aAAa;EAAEC,SAAS,EAAEL;AAAc,CAAC,EACjD;EAAEI,IAAI,EAAE,iBAAiB;EAAEC,SAAS,EAAEJ;AAAiB,CAAC,EACxD;EAAEG,IAAI,EAAE,YAAY;EAAEC,SAAS,EAAEH;AAAa,CAAC,EAC/C;EAAEE,IAAI,EAAE,GAAG;EAAEE,QAAQ,EAAE;AAAc,CAAC,CACvC;AAED,MAAMC,MAAM,GAAGZ,YAAY,CAAC;EAC1Ba,OAAO,EAAEZ,gBAAgB,CAAC,CAAC;EAC3BO;AACF,CAAC,CAAC;;AAEF;AACAI,MAAM,CAACE,UAAU,CAAC,CAACC,EAAE,EAAEC,IAAI,EAAEC,IAAI,KAAK;EACpC,MAAMC,WAAW,GAAG,CAAC,QAAQ,EAAE,WAAW,CAAC;EAC3C,MAAMC,YAAY,GAAG,CAACD,WAAW,CAACE,QAAQ,CAACL,EAAE,CAACN,IAAI,CAAC;EACnD,MAAMY,KAAK,GAAGC,cAAc,CAACC,OAAO,CAAC,cAAc,CAAC;EAEpD,IAAIJ,YAAY,IAAI,CAACE,KAAK,EAAE,OAAOJ,IAAI,CAAC,QAAQ,CAAC;EACjDA,IAAI,CAAC,CAAC;AACR,CAAC,CAAC;AAEF,eAAeL,MAAM;AAGrBA,MAAM,CAACE,UAAU,CAAC,CAACC,EAAE,EAAEC,IAAI,EAAEC,IAAI,KAAK;EACpC,MAAMI,KAAK,GAAGC,cAAc,CAACC,OAAO,CAAC,cAAc,CAAC;EACpD,MAAMC,QAAQ,GAAG,CAAC,EAAET,EAAE,CAACU,IAAI,IAAIV,EAAE,CAACU,IAAI,CAACC,MAAM,CAAC;EAC9C,MAAMC,IAAI,GAAG,CAAC,QAAQ,EAAE,WAAW,CAAC;EACpC,IAAIH,QAAQ,IAAIG,IAAI,CAACP,QAAQ,CAACL,EAAE,CAACN,IAAI,CAAC,EAAE,OAAOQ,IAAI,CAAC,CAAC;EACrD,IAAI,CAACI,KAAK,EAAE,OAAOJ,IAAI,CAAC,QAAQ,CAAC;EACjCA,IAAI,CAAC,CAAC;AACR,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}